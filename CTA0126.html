<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkpoint Tavern: Party Edition</title>
    <style>
        :root {
            /* Dimmed Arcade Palette */
            --bg-body: #cfcfcf; 
            --bg-card: #e6e6e6;
            --text-main: #2b2b2b;
            --text-muted: #555555;
            
            /* The 4 Buttons */
            --btn-red: #d32f2f;
            --btn-yellow: #fbc02d;
            --btn-blue: #1976d2;
            --btn-green: #388e3c;
            
            --border-color: #9e9e9e;
            --shadow: 4px 4px 0px rgba(0,0,0,0.15);
            --radius: 8px;
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', 'Roboto', sans-serif;
            background-color: var(--bg-body);
            background-image: radial-gradient(#b0b0b0 1px, transparent 1px);
            background-size: 20px 20px;
            color: var(--text-main);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 280px;
            background-color: #e0e0e0;
            border-right: 4px solid var(--text-main);
            padding: 2rem 1.5rem;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            top: 0;
            left: 0;
            z-index: 100;
        }

        .sidebar h1 {
            font-size: 1.3rem;
            color: var(--text-main);
            text-transform: uppercase;
            font-weight: 900;
            text-align: center;
            border: 4px solid var(--text-main);
            padding: 15px 5px;
            margin-bottom: 2rem;
            border-radius: var(--radius);
            background: var(--bg-card);
            box-shadow: var(--shadow);
            letter-spacing: -1px;
            line-height: 1.2;
        }

        .nav-group-title {
            font-size: 0.8rem;
            text-transform: uppercase;
            color: var(--text-muted);
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            font-weight: bold;
            padding-left: 0.5rem;
            border-bottom: 2px solid #ccc;
        }

        .nav-link {
            display: block;
            padding: 0.8rem 1rem;
            color: var(--text-muted);
            text-decoration: none;
            border-radius: 4px;
            margin-bottom: 0.5rem;
            transition: all 0.2s ease;
            font-size: 0.95rem;
            cursor: pointer;
            border: 2px solid transparent;
            font-weight: 700;
            background: rgba(255,255,255,0.4);
        }

        .nav-link:hover {
            background-color: white;
            border-color: var(--text-main);
            transform: translateX(2px);
        }

        .nav-link.active {
            background-color: var(--text-main);
            color: #e0e0e0;
            box-shadow: var(--shadow);
        }

        /* Specific Button Accents for Nav */
        #nav-architect.active { background-color: var(--btn-blue); border-color: var(--btn-blue); }
        #nav-mechanic.active { background-color: var(--btn-yellow); color: #222; border-color: var(--btn-yellow); }
        #nav-vibe.active { background-color: var(--btn-red); border-color: var(--btn-red); }
        #nav-producer.active { background-color: var(--btn-green); border-color: var(--btn-green); }

        .panic-btn {
            margin-top: 2rem;
            background: #444;
            color: white;
            text-align: center;
        }
        .panic-btn:hover { background: var(--btn-red); color: white; }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            padding: 3rem 5rem;
            max-width: 1100px;
            width: 100%;
        }

        .page-section {
            display: none;
            animation: slideUp 0.4s ease-out;
        }
        .page-section.active { display: block; }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        header { margin-bottom: 3rem; text-align: center; }
        h1 { font-size: 2.5rem; margin: 0; color: var(--text-main); font-weight: 900; letter-spacing: -1px; text-transform: uppercase; }
        h2 { color: var(--text-main); margin-top: 2.5rem; border-bottom: 3px solid #bbb; padding-bottom: 0.5rem; }
        
        /* Cards */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .card {
            background: var(--bg-card);
            border: 2px solid var(--text-main);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            position: relative;
        }
        .card h3 { margin-top: 0; font-weight: 800; font-size: 1.2rem; }

        .role-tagline {
            display: block;
            margin-top: -10px;
            margin-bottom: 15px;
            font-style: italic;
            font-weight: bold;
            font-size: 0.9rem;
        }

        /* Sync Banners */
        .sync-banner {
            background: var(--text-main);
            color: #e0e0e0;
            padding: 1.5rem;
            margin: 3rem 0;
            border-radius: var(--radius);
            text-align: center;
            border: 4px solid var(--btn-yellow);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }
        
        .sync-banner::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; height: 10px;
            background: repeating-linear-gradient(45deg, var(--btn-yellow), var(--btn-yellow) 20px, #333 20px, #333 40px);
        }

        .sync-banner h3 { margin: 0; font-size: 1.5rem; text-transform: uppercase; letter-spacing: 1px; }

        /* Checklists */
        .checklist { list-style: none; padding: 0; margin-top: 1rem; }
        
        .checklist li {
            background: #f4f4f4;
            margin-bottom: 0.8rem;
            padding: 1rem;
            border-radius: 4px;
            display: flex;
            align-items: flex-start;
            border: 1px solid #ccc;
            transition: all 0.2s;
        }
        
        .checklist li:hover { border-color: #666; background: #fff; }
        
        .checklist input[type="checkbox"] {
            margin-right: 1rem;
            margin-top: 0.3rem;
            transform: scale(1.4);
            cursor: pointer;
            accent-color: var(--btn-green);
        }
        
        .checklist label { cursor: pointer; flex: 1; font-weight: 600; font-size: 0.95rem; }
        .checklist li.completed { opacity: 0.6; background: #ddd; }
        .checklist li.completed label { text-decoration: line-through; }

        /* Prompts */
        .prompt-box {
            background: #2b2b2b;
            color: #50fa7b;
            font-family: 'Consolas', monospace;
            padding: 1.5rem;
            border-radius: 4px;
            position: relative;
            margin-top: 1rem;
            font-size: 0.9rem;
            white-space: pre-wrap;
            border: 2px solid #000;
        }

        .copy-btn {
            position: absolute;
            top: 10px; right: 10px;
            background: var(--btn-blue);
            color: white;
            border: 2px solid #000;
            padding: 5px 15px;
            cursor: pointer;
            font-weight: bold;
            border-radius: 4px;
            text-transform: uppercase;
            font-size: 0.8rem;
        }
        .copy-btn:hover { background: #4fa3ff; }

        /* Discord Box */
        .discord-box {
            background: #5865F2;
            color: white;
            padding: 1.5rem;
            border-radius: var(--radius);
            margin: 1rem 0;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            box-shadow: var(--shadow);
            border: 2px solid #000;
        }

        /* Voting Grid */
        .voting-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }
        .vote-card {
            background: white;
            padding: 1rem;
            border-radius: 4px;
            border: 1px solid #ccc;
            text-align: center;
        }

        /* Creative Tips */
        .creative-tip {
            border-left: 4px solid var(--btn-yellow);
            background: #fff8e1;
            padding: 1rem;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        .creative-tip strong { color: #d4a000; }
        
        /* Inspiration Dropdown */
        details {
            background: #fff;
            border: 1px solid #ccc;
            border-radius: 6px;
            margin-top: 1rem;
        }
        summary {
            padding: 0.8rem;
            cursor: pointer;
            font-weight: bold;
            background: #f0f0f0;
            border-bottom: 1px solid #ccc;
        }
        .details-content { padding: 1rem; }
        
        /* Input Fields */
        .input-group {
            display: flex;
            gap: 10px;
            margin: 1rem 0;
        }
        .style-input {
            flex: 1;
            padding: 10px;
            border: 2px solid var(--btn-red);
            border-radius: 4px;
            font-size: 1rem;
        }
        .save-btn {
            padding: 10px 20px;
            background: var(--btn-red);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 1.5rem; }
        }
    </style>
</head>
<body>

    <!-- Sidebar -->
    <nav class="sidebar">
        <h1>Checkpoint Tavern</h1>
        
        <div class="nav-group-title">The Gathering</div>
        <a onclick="showPage('phase0')" class="nav-link active" id="nav-phase0">üó≥Ô∏è Phase 0: The Vote</a>
        <a onclick="showPage('setup')" class="nav-link" id="nav-setup">üé≠ Role Assignment</a>
        
        <div class="nav-group-title">Player Cards</div>
        <a onclick="showPage('architect')" class="nav-link" id="nav-architect">üõ†Ô∏è The Architect</a>
        <a onclick="showPage('mechanic')" class="nav-link" id="nav-mechanic">‚öôÔ∏è The Mechanic</a>
        <a onclick="showPage('vibe')" class="nav-link" id="nav-vibe">üé® Vibe Artist</a>
        <a onclick="showPage('producer')" class="nav-link" id="nav-producer">üéµ The Producer</a>
        
        <div class="nav-group-title">Group Sync</div>
        <a onclick="showPage('sync1')" class="nav-link" id="nav-sync1">1Ô∏è‚É£ Sync: The Bones</a>
        <a onclick="showPage('sync2')" class="nav-link" id="nav-sync2">2Ô∏è‚É£ Sync: The Merge</a>
        <a onclick="showPage('sync25')" class="nav-link" id="nav-sync25">üêû Sync: Bug Hunt</a>
        <a onclick="showPage('sync3')" class="nav-link" id="nav-sync3">3Ô∏è‚É£ Sync: Launch</a>

        <a onclick="showPage('panic')" class="nav-link panic-btn">üö® PANIC BUTTON</a>
    </nav>

    <!-- Main Content -->
    <div class="main-content">

        <!-- PAGE: PHASE 0 (THE VOTE) -->
        <div id="page-phase0" class="page-section active">
            <header>
                <h1>Phase 0: The Tavern Vote</h1>
                <p>Before any code is written, we must agree on the destination.</p>
            </header>

            <div class="card" style="border-color: var(--btn-yellow);">
                <h3 style="color: #d4a000;">üëë Step 1: Nominate the Tavern Keeper</h3>
                <p>Choose <strong>ONE</strong> person to be the "Tavern Keeper".</p>
                <p><em>Their job is simple: When the group can't decide, they click the button. They hold the "Tie-Breaker Card".</em></p>
            </div>

            <h2>Step 2: The Consensus</h2>
            <p>Discuss these 4 categories in Discord. The Tavern Keeper writes down the final winners.</p>
            
            <div class="voting-grid">
                <div class="vote-card" style="border-top: 4px solid var(--btn-blue);">
                    <h4>üïπÔ∏è GENRE</h4>
                    <p style="font-size:0.9rem;">(e.g., Dungeon Crawler, Arena Shooter, Party Racer)</p>
                    <input type="text" placeholder="Winner goes here..." style="width:100%; padding:5px;">
                </div>
                <div class="vote-card" style="border-top: 4px solid var(--btn-red);">
                    <h4>üé® VISUAL STYLE</h4>
                    <p style="font-size:0.9rem;">(e.g., Neon Cyberpunk, Sketchy Pencil, 8-Bit Fantasy)</p>
                    <input type="text" placeholder="Winner goes here..." style="width:100%; padding:5px;">
                </div>
                <div class="vote-card" style="border-top: 4px solid var(--btn-green);">
                    <h4>üîä AUDIO VIBE</h4>
                    <p style="font-size:0.9rem;">(e.g., Heavy Metal, Lo-Fi Chill, Orchestral Panic)</p>
                    <input type="text" placeholder="Winner goes here..." style="width:100%; padding:5px;">
                </div>
                <div class="vote-card" style="border-top: 4px solid var(--btn-yellow);">
                    <h4>‚öîÔ∏è 4-PLAYER MODE</h4>
                    <p style="font-size:0.9rem;">(e.g., 4v4 Co-op, 1v3 Asymmetric, Free-for-all)</p>
                    <input type="text" placeholder="Winner goes here..." style="width:100%; padding:5px;">
                </div>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <button onclick="showPage('setup')" style="padding: 1rem 2rem; background: var(--text-main); color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 1.1rem; font-weight: bold;">We Have Decided ¬ª Go to Roles</button>
            </div>
        </div>

        <!-- PAGE: SETUP (ROLES) -->
        <div id="page-setup" class="page-section">
            <header>
                <h1>Assign Your Characters</h1>
                <p>Pick your card. Read your outcome.</p>
            </header>

            <div class="discord-box">
                <span style="font-size: 2.5rem;">üéôÔ∏è</span>
                <div>
                    <strong>Tech Check:</strong><br>
                    Ensure everyone has opened this manual on their own screen so they can follow their specific checklists.
                </div>
            </div>

            <div class="card-grid">
                <div class="card" onclick="showPage('architect')" style="cursor:pointer; border-color: var(--btn-blue);">
                    <h3 style="color:var(--btn-blue)">üõ†Ô∏è The Architect</h3>
                    <span class="role-tagline" style="color:var(--btn-blue)">"The Code-Weaver: You spin the web that connects us all."</span>
                    <p><strong>Your Job:</strong> Managing the Files. Integration. Hosting.</p>
                </div>
                <div class="card" onclick="showPage('mechanic')" style="cursor:pointer; border-color: var(--btn-yellow);">
                    <h3 style="color:#d4a000">‚öôÔ∏è The Mechanic</h3>
                    <span class="role-tagline" style="color:#d4a000">"The Fun-Engine: You build the rules that make us scream."</span>
                    <p><strong>Your Job:</strong> Game Design. Logic Rules. Balancing (Speed/Damage).</p>
                </div>
                <div class="card" onclick="showPage('vibe')" style="cursor:pointer; border-color: var(--btn-red);">
                    <h3 style="color:var(--btn-red)">üé® Vibe Artist</h3>
                    <span class="role-tagline" style="color:var(--btn-red)">"The Pixel-Painter: You dream the world we play inside."</span>
                    <p><strong>Your Job:</strong> Sprites. UI Design. Backgrounds. Consistency.</p>
                </div>
                <div class="card" onclick="showPage('producer')" style="cursor:pointer; border-color: var(--btn-green);">
                    <h3 style="color:var(--btn-green)">üéµ The Producer</h3>
                    <span class="role-tagline" style="color:var(--btn-green)">"The Hype-Master: You set the mood and tell the tale."</span>
                    <p><strong>Your Job:</strong> Lore. Music. Sound Effects. The "Vibe Check".</p>
                </div>
            </div>
        </div>

        <!-- PAGE: ARCHITECT -->
        <div id="page-architect" class="page-section">
            <header>
                <h1 style="color:var(--btn-blue)">The Architect</h1>
                <span class="role-tagline" style="text-align:center; font-size: 1.2rem;">"You spin the web that connects us all."</span>
            </header>

            <!-- PHASE 1 -->
            <div class="card">
                <h3>Phase 1: The Foundation (0:00 - 0:45)</h3>
                <p>Your goal is a robust lobby. If the host leaves, the game must survive.</p>
                <ul class="checklist">
                    <li><input type="checkbox" id="arch-1"><label for="arch-1">Open ChatGPT (Canvas) or Gemini.</label></li>
                    <li><input type="checkbox" id="arch-2"><label for="arch-2">Paste the "Robust Multiplayer Prompt" (below).</label></li>
                    <li><input type="checkbox" id="arch-3"><label for="arch-3">Create `index.html` locally. Test: Open 3 tabs.</label></li>
                    <li><input type="checkbox" id="arch-4"><label for="arch-4">Close the Host tab. Does a new Host take over? (Host Migration).</label></li>
                    <li><input type="checkbox" id="arch-5"><label for="arch-5"><strong>WAIT:</strong> Don't add gameplay logic yet. Wait for the Mechanic's rules.</label></li>
                </ul>
                
                <div class="prompt-box">
                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
Act as a senior game developer. Create a single-file HTML5 game using Phaser 3 and PeerJS.
Target: 4-Player P2P Multiplayer with Lobby.
Requirements:
1. Scenes: 'Menu', 'Lobby', 'Game'.
2. Menu: Simple "Start" button.
3. Lobby:
   - Host generates a Room ID.
   - Clients enter Room ID to join.
   - Show list of connected players (e.g., "Player 1 (Host)", "Player 2").
   - "Start Game" button (Host only) moves everyone to Game scene.
4. Networking (Critical):
   - Handle Host Migration: If Host disconnects, the peer with the lowest PeerID becomes new Host.
   - Sync all player positions.
5. Visuals: Simple colored squares for now.
6. Provide complete 'index.html'.
                </div>
            </div>

            <!-- SYNC 1 -->
            <div class="sync-banner">
                <h3>üõë STOP! Go to "Sync 1: The Bones"</h3>
            </div>

            <!-- PHASE 2 -->
            <div class="card">
                <h3>Phase 2: The Integration (0:45 - 1:30)</h3>
                <ul class="checklist">
                    <li><input type="checkbox" id="arch-6"><label for="arch-6"><strong>Check Discord:</strong> Get the Mechanic's "Ruleset".</label></li>
                    <li><input type="checkbox" id="arch-7"><label for="arch-7"><strong>Check Discord:</strong> Get the Vibe Artist's Base64 Strings.</label></li>
                    <li><input type="checkbox" id="arch-8"><label for="arch-8">Use the prompt below to combine them.</label></li>
                </ul>
                <div class="prompt-box">
                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
I have the game rules and assets. Update the code:

1. ASSETS:
- Preload 'playerSprite' using Base64: "[PASTE STRING]"
- Preload 'bgImg' using URL: "[PASTE URL]"
- Replace player rectangles with 'playerSprite'.

2. GAMEPLAY RULES (Implement these):
- [PASTE MECHANIC'S RULESET HERE e.g. "Players move at speed 300"]
- [PASTE MECHANIC'S WIN CONDITION HERE]
                </div>
            </div>
            
            <!-- SYNC 2 -->
            <div class="sync-banner">
                <h3>üõë STOP! Go to "Sync 2: The Merge"</h3>
            </div>
            
            <div class="card">
                <h3>Phase 3: The Polish</h3>
                <ul class="checklist">
                    <li><input type="checkbox" id="arch-9"><label for="arch-9">Get "UI Text" from Producer (Game Title, Win Messages).</label></li>
                    <li><input type="checkbox" id="arch-10"><label for="arch-10">Ask AI: "Update the Menu Title to '[NAME]' and add these Win Messages..."</label></li>
                    <li><input type="checkbox" id="arch-11"><label for="arch-11">Deploy to GitHub Pages.</label></li>
                </ul>
            </div>
        </div>

        <!-- PAGE: MECHANIC -->
        <div id="page-mechanic" class="page-section">
            <header>
                <h1 style="color:#d4a000">The Mechanic</h1>
                <span class="role-tagline" style="text-align:center; font-size: 1.2rem;">"You build the rules that make us scream."</span>
            </header>

            <div class="card">
                <h3>Phase 1: The Design Document (0:00 - 0:45)</h3>
                <p>You are the Game Designer. The Architect cannot code without your instructions.</p>
                <ul class="checklist">
                    <li><input type="checkbox" id="mech-1"><label for="mech-1"><strong>Define the Goal:</strong> What are we trying to do? (Survive? Kill? Collect?)</label></li>
                    <li><input type="checkbox" id="mech-2"><label for="mech-2"><strong>Define the Loss:</strong> How do players die/lose?</label></li>
                    <li><input type="checkbox" id="mech-3"><label for="mech-3"><strong>Define the Controls:</strong> WASD? Arrow Keys? Mouse?</label></li>
                    <li><input type="checkbox" id="mech-4"><label for="mech-4"><strong>Write the "Ruleset" for Discord:</strong> (See below)</label></li>
                </ul>
                <div class="creative-tip">
                    <strong>üìù Template: Copy/Paste this to Discord for the Architect</strong><br><br>
                    "ARCHITECT, HERE IS THE LOGIC:<br>
                    1. Player Speed: [e.g. Fast/Slow]<br>
                    2. Interaction: [e.g. When Player touches Enemy, Player restarts]<br>
                    3. Win Condition: [e.g. First to 10 points wins]<br>
                    4. Map: [e.g. No walls, wrap around screen]"
                </div>
            </div>

            <div class="sync-banner">
                <h3>üõë STOP! Go to "Sync 1: The Bones"</h3>
            </div>

            <div class="card">
                <h3>Phase 2: The Balance (0:45 - 1:30)</h3>
                <p>The game is running, but is it fun?</p>
                <ul class="checklist">
                    <li><input type="checkbox" id="mech-5"><label for="mech-5"><strong>Playtest:</strong> Is it too easy? Too hard?</label></li>
                    <li><input type="checkbox" id="mech-6"><label for="mech-6"><strong>Tweak:</strong> Tell Architect "Increase Enemy Speed by 50%" or "Make hitbox smaller".</label></li>
                    <li><input type="checkbox" id="mech-7"><label for="mech-7"><strong>Edge Cases:</strong> What happens if 2 players hit the goal at the exact same time?</label></li>
                </ul>
            </div>
        </div>

        <!-- PAGE: VIBE ARTIST -->
        <div id="page-vibe" class="page-section">
            <header>
                <h1 style="color:var(--btn-red)">Vibe Artist</h1>
                <span class="role-tagline" style="text-align:center; font-size: 1.2rem;">"You dream the world we play inside."</span>
            </header>

            <!-- STYLE LOCKER -->
            <div class="card" style="border-color: var(--btn-red);">
                <h3>Step 0: The Style Contract</h3>
                <p>Lock in the group's visual decision here. This will help you generate prompts.</p>
                <div class="input-group">
                    <input type="text" id="vibe-style-input" class="style-input" placeholder="e.g. '8-bit Cyberpunk with Neon Colors'">
                    <button class="save-btn" onclick="saveVibeStyle()">LOCK IT IN</button>
                </div>
                <small id="style-saved-msg" style="color:green; display:none;">Style Locked! Prompts updated.</small>
            </div>

            <div class="card" style="margin-top: 1.5rem;">
                <h3>Phase 1: The Asset Factory (0:00 - 0:45)</h3>
                <p>Use your tools: <strong>DALL-E 3</strong> or <strong>Imagen</strong>. Use <strong>Remove.bg</strong> for characters.</p>
                <ul class="checklist">
                    <li><input type="checkbox" id="vibe-1"><label for="vibe-1"><strong>The Player:</strong> Generate the main character (Base64).</label></li>
                    <li><input type="checkbox" id="vibe-2"><label for="vibe-2"><strong>The Enemy/Hazard:</strong> Generate the spike/enemy sprite.</label></li>
                    <li><input type="checkbox" id="vibe-3"><label for="vibe-3"><strong>The Background:</strong> 16:9 wallpaper (URL).</label></li>
                    <li><input type="checkbox" id="vibe-4"><label for="vibe-4"><strong>The UI:</strong> "Start Button" & "Title Banner".</label></li>
                </ul>
                
                <div class="creative-tip">
                    <strong>üé® Copy-Paste Prompts (Style Applied: <span class="vibe-style-display" style="font-weight:bold; color:var(--btn-red);">[Not Set]</span>)</strong>
                    <br><br>
                    <div class="prompt-box">
                        <button class="copy-btn" onclick="copyText(this)">Copy</button>
"Sprite sheet of a game character.
Style: <span class="vibe-style-display">[STYLE]</span>.
View: Top-down.
Background: Solid white (for easy removal).
Action: Idle pose and walking."
                    </div>
                </div>

                <details>
                    <summary>Need Inspiration? Click for Style Ideas</summary>
                    <div class="details-content">
                        <ul>
                            <li><strong>16-Bit Arcade:</strong> "SNES video game style, pixel art, high contrast."</li>
                            <li><strong>Vector Flat:</strong> "Minimalist, Kurzgesagt style, no shading, bright colors."</li>
                            <li><strong>Hand Drawn:</strong> "Sketchy marker on paper, thick black outlines."</li>
                        </ul>
                    </div>
                </details>
            </div>

            <div class="sync-banner">
                <h3>üõë STOP! Go to "Sync 1: The Bones"</h3>
            </div>

            <div class="card">
                <h3>Phase 2: World Building</h3>
                <ul class="checklist">
                    <li><input type="checkbox" id="vibe-5"><label for="vibe-5"><strong>Lobby Art:</strong> Create a "Waiting Room" background.</label></li>
                    <li><input type="checkbox" id="vibe-6"><label for="vibe-6"><strong>Particles:</strong> Ask Architect to use simple colored squares for explosions (Keep performance high).</label></li>
                </ul>
            </div>
        </div>

        <!-- PAGE: PRODUCER -->
        <div id="page-producer" class="page-section">
            <header>
                <h1 style="color:var(--btn-green)">The Producer</h1>
                <span class="role-tagline" style="text-align:center; font-size: 1.2rem;">"The Hype-Master & Lore Keeper."</span>
            </header>

            <div class="card">
                <h3>Phase 1: Lore & Atmosphere (0:00 - 0:45)</h3>
                <p>You define the "Soul" of the game. Why are we here?</p>
                <ul class="checklist">
                    <li><input type="checkbox" id="prod-1"><label for="prod-1"><strong>The Lore:</strong> Write 2 sentences. Why are we fighting?</label></li>
                    <li><input type="checkbox" id="prod-2"><label for="prod-2"><strong>The Title:</strong> Name the game. Make it catchy.</label></li>
                    <li><input type="checkbox" id="prod-3"><label for="prod-3"><strong>Lobby Text:</strong> Write 3 funny "Waiting for Players" messages.</label></li>
                    <li><input type="checkbox" id="prod-4"><label for="prod-4"><strong>Music:</strong> Generate a "Lobby Loop" (Chill) and "Battle Track" (Fast).</label></li>
                    <li><input type="checkbox" id="prod-5"><label for="prod-5"><strong>SFX:</strong> Find sounds for "Jump", "Hit", and "Win".</label></li>
                </ul>
                
                <details>
                    <summary>üéµ Need help with Suno? (Click to Expand)</summary>
                    <div class="details-content">
                        <strong>Suno Quick-Start:</strong>
                        <ol>
                            <li>Go to <a href="https://suno.com" target="_blank">Suno.com</a> -> "Create" -> "Custom Mode".</li>
                            <li><strong>Lyrics:</strong> Check "Instrumental".</li>
                            <li><strong>Style:</strong> "16-bit arcade, fast tempo, looping".</li>
                            <li><strong>Action:</strong> Create -> Download MP3 -> Upload to Discord -> Copy Link.</li>
                        </ol>
                    </div>
                </details>

                <div class="creative-tip">
                    <strong>üìù Paste to Discord:</strong>
                    "GAME TITLE: [Name]<br>
                    LOBBY TEXT: [Message 1], [Message 2]<br>
                    WIN MESSAGE: 'Victory is yours!'<br>
                    LOSE MESSAGE: 'You have been deleted.'"
                </div>
            </div>

            <div class="sync-banner">
                <h3>üõë STOP! Go to "Sync 1: The Bones"</h3>
            </div>

            <div class="card">
                <h3>Phase 2: QA Lead & Writing</h3>
                <p>You are now the "Quality Assurance" Lead. It is your job to find bugs.</p>
                <ul class="checklist">
                    <li><input type="checkbox" id="prod-6"><label for="prod-6"><strong>How to Play:</strong> Write 3 bullet points explaining controls.</label></li>
                    <li><input type="checkbox" id="prod-7"><label for="prod-7"><strong>Bug Hunting:</strong> Play the game. Does the music loop? Do sounds play?</label></li>
                </ul>
            </div>
        </div>

        <!-- PAGE: SYNC 1 -->
        <div id="page-sync1" class="page-section">
            <div class="sync-banner" style="margin-top:0;">
                <h1>SYNC 1: THE BONES</h1>
                <p>Time Check: 45 Minutes In</p>
            </div>
            <div class="card">
                <h3>The Connection Test</h3>
                <ul class="checklist">
                    <li><input type="checkbox" id="s1-1"><label for="s1-1"><strong>Architect:</strong> Share screen. Show the "Lobby".</label></li>
                    <li><input type="checkbox" id="s1-2"><label for="s1-2"><strong>Everyone:</strong> Does the list update when we join?</label></li>
                    <li><input type="checkbox" id="s1-3"><label for="s1-3"><strong>Vibe Artist:</strong> Present your "Hero Sprite" concept. Do we love the style?</label></li>
                    <li><input type="checkbox" id="s1-4"><label for="s1-4"><strong>Mechanic:</strong> Read your "Ruleset" out loud. Does everyone agree?</label></li>
                    <li><input type="checkbox" id="s1-5"><label for="s1-5"><strong>Producer:</strong> Reveal the "Game Name".</label></li>
                </ul>
            </div>
        </div>

        <!-- PAGE: SYNC 2 -->
        <div id="page-sync2" class="page-section">
            <div class="sync-banner" style="margin-top:0;">
                <h1>SYNC 2: THE MERGE</h1>
                <p>Time Check: 1 Hour 30 Minutes In</p>
            </div>
            <div class="card">
                <h3>The Integration</h3>
                <ul class="checklist">
                    <li><input type="checkbox" id="s2-1"><label for="s2-1"><strong>Architect:</strong> Has implemented the Mechanic's Logic.</label></li>
                    <li><input type="checkbox" id="s2-2"><label for="s2-2"><strong>Architect:</strong> Has swapped squares for Vibe Artist's Sprites.</label></li>
                    <li><input type="checkbox" id="s2-3"><label for="s2-3"><strong>Vibe Artist:</strong> Vibe Check: Are sprites blurry? Is the background distracting? Give feedback.</label></li>
                    <li><input type="checkbox" id="s2-4"><label for="s2-4"><strong>Producer:</strong> Audio Mix Check: Is the music too loud compared to SFX?</label></li>
                    <li><input type="checkbox" id="s2-5"><label for="s2-5"><strong>Playtest:</strong> Everyone join. Try to break it.</label></li>
                </ul>
            </div>
        </div>

        <!-- PAGE: SYNC 2.5 (BUG HUNT) -->
        <div id="page-sync25" class="page-section">
             <div class="sync-banner" style="margin-top:0; border-color: var(--btn-red);">
                <h1>SYNC 2.5: THE BUG HUNT</h1>
                <p>Time Check: 2 Hours 15 Minutes In</p>
            </div>
            <div class="card">
                <h3>QA Session (Led by Producer)</h3>
                <p>Everyone stops working. Everyone plays the game for 15 minutes straight.</p>
                <ul class="checklist">
                    <li><input type="checkbox" id="s25-1"><label for="s25-1"><strong>Test 1:</strong> What happens if 4 players spam keys at once?</label></li>
                    <li><input type="checkbox" id="s25-2"><label for="s25-2"><strong>Test 2:</strong> What happens if someone refreshes their page?</label></li>
                    <li><input type="checkbox" id="s25-3"><label for="s25-3"><strong>Test 3:</strong> Is the "Win Condition" actually triggering?</label></li>
                    <li><input type="checkbox" id="s25-4"><label for="s25-4"><strong>Producer:</strong> Write down the Top 3 Bugs. Hand list to Architect.</label></li>
                </ul>
            </div>
        </div>

        <!-- PAGE: SYNC 3 -->
        <div id="page-sync3" class="page-section">
            <div class="sync-banner" style="margin-top:0;">
                <h1>SYNC 3: LAUNCH</h1>
                <p>Time Check: 2 Hours 45 Minutes In</p>
            </div>
            <div class="card">
                <h3>Deployment</h3>
                <ul class="checklist">
                    <li><input type="checkbox" id="s3-1"><label for="s3-1"><strong>Vibe Artist:</strong> Final Polish Check. Any visual glitches?</label></li>
                    <li><input type="checkbox" id="s3-2"><label for="s3-2"><strong>Architect:</strong> GitHub Repo -> Upload `index.html`.</label></li>
                    <li><input type="checkbox" id="s3-3"><label for="s3-3"><strong>Architect:</strong> Settings -> Pages -> Deploy from Main.</label></li>
                    <li><input type="checkbox" id="s3-4"><label for="s3-4"><strong>Everyone:</strong> Share the link. High five.</label></li>
                </ul>
            </div>
        </div>

        <!-- PAGE: PANIC BUTTON -->
        <div id="page-panic" class="page-section">
            <header>
                <h1 style="color:var(--btn-red)">üö® PANIC ROOM</h1>
            </header>

            <div class="card">
                <h3 style="color:var(--btn-red)">Problem: "PeerJS Host Migration is failing!"</h3>
                <p><strong>The Fix:</strong> Simplify. Remove migration.</p>
                <p>If the host leaves, the game ends. That is acceptable for a 3-hour jam. Don't waste hour 2 debugging mesh networking.</p>
            </div>

            <div class="card" style="margin-top:1rem;">
                <h3 style="color:var(--btn-yellow)">Problem: "Lobby works but Game is black!"</h3>
                <p><strong>The Fix:</strong> Check Scene Transition.</p>
                <p>Ask AI: "Ensure the 'Start Game' button correctly stops the Lobby Scene and starts the Game Scene, passing the socket connection."</p>
            </div>
        </div>

    </div>

    <script>
        // Navigation Logic
        function showPage(pageId) {
            document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(n => n.classList.remove('active'));
            
            document.getElementById('page-' + pageId).classList.add('active');
            
            const nav = document.getElementById('nav-' + pageId);
            if(nav) nav.classList.add('active');
            
            window.scrollTo(0,0);
        }

        // Checklist Local Storage Logic
        document.addEventListener('DOMContentLoaded', () => {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(box => {
                const saved = localStorage.getItem('checkpointTavern_' + box.id);
                if (saved === 'true') {
                    box.checked = true;
                    box.closest('li').classList.add('completed');
                }
                box.addEventListener('change', () => {
                    localStorage.setItem('checkpointTavern_' + box.id, box.checked);
                    if(box.checked) {
                        box.closest('li').classList.add('completed');
                    } else {
                        box.closest('li').classList.remove('completed');
                    }
                });
            });
            
            // Load Saved Vibe Style
            const savedStyle = localStorage.getItem('vibeStyle');
            if (savedStyle) {
                document.getElementById('vibe-style-input').value = savedStyle;
                updateStylePlaceholders(savedStyle);
            }
        });

        // Save Vibe Style
        function saveVibeStyle() {
            const style = document.getElementById('vibe-style-input').value;
            localStorage.setItem('vibeStyle', style);
            document.getElementById('style-saved-msg').style.display = 'block';
            setTimeout(() => document.getElementById('style-saved-msg').style.display = 'none', 2000);
            updateStylePlaceholders(style);
        }

        function updateStylePlaceholders(style) {
            document.querySelectorAll('.vibe-style-display').forEach(span => {
                span.innerText = style;
                span.style.color = '#333';
            });
        }

        // Copy Text Logic
        function copyText(btn) {
            const fullText = btn.parentElement.innerText.replace('Copy', '').trim();
            navigator.clipboard.writeText(fullText).then(() => {
                const original = btn.innerText;
                btn.innerText = "COPIED!";
                setTimeout(() => btn.innerText = original, 2000);
            });
        }
    </script>
</body>
</html>
